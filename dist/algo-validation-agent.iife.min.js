var AlgoValidationAgent=function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),e=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},r=function(){function e(t,r,u,i){n(this,e),this.name=t,this.fn=r,this.args=u,this.modifiers=i}return t(e,[{key:"_test",value:function(n){var t=this.fn;try{i(this.modifiers.slice(),t)(n)}catch(n){t=function(){return!1}}try{return i(this.modifiers.slice(),t)(n)}catch(n){return!1}}},{key:"_check",value:function(n){try{i(this.modifiers.slice(),this.fn)(n)}catch(n){if(i(this.modifiers.slice(),(function(n){return n}))(!1))return}if(!i(this.modifiers.slice(),this.fn)(n))throw null}},{key:"_testAsync",value:function(n){var t=this;return new Promise((function(e,r){(function n(t,e){if(t.length){var r=t.shift(),i=n(t,e);return r.performAsync(i)}return function(n){return Promise.resolve(u(e,"async")(n))}})(t.modifiers.slice(),t.fn)(n).then((function(t){t?e(n):r(null)})).catch((function(n){return r(n)}))}))}}]),e}();function u(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple";return"object"==typeof n?n[t]:n}function i(n,t){if(n.length){var e=n.shift(),r=i(n,t);return e.perform(r)}return u(t)}var o=function t(e,r,u){n(this,t),this.name=e,this.perform=r,this.performAsync=u},c=function(t){function r(t,u,i,o){n(this,r);for(var c=arguments.length,f=Array(c>4?c-4:0),a=4;a<c;a++)f[a-4]=arguments[a];var s=e(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,f));return Error.captureStackTrace&&Error.captureStackTrace(s,r),s.rule=t,s.value=u,s.cause=i,s.target=o,s}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(r,Error),r}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n(this,e),this.chain=t,this.nextRuleModifiers=r}return t(e,[{key:"_applyRule",value:function(n,t){var e=this;return function(){for(var u=arguments.length,i=Array(u),o=0;o<u;o++)i[o]=arguments[o];return e.chain.push(new r(t,n.apply(e,i),i,e.nextRuleModifiers)),e.nextRuleModifiers=[],e}}},{key:"_applyModifier",value:function(n,t){return this.nextRuleModifiers.push(new o(t,n.simple,n.async)),this}},{key:"_clone",value:function(){return new e(this.chain.slice(),this.nextRuleModifiers.slice())}},{key:"test",value:function(n){return this.chain.every((function(t){return t._test(n)}))}},{key:"testAll",value:function(n){var t=[];return this.chain.forEach((function(e){try{e._check(n)}catch(r){t.push(new c(e,n,r))}})),t}},{key:"check",value:function(n){this.chain.forEach((function(t){try{t._check(n)}catch(e){throw new c(t,n,e)}}))}},{key:"testAsync",value:function(n){var t=this;return new Promise((function(e,r){!function n(t,e,r,u){if(e.length){var i=e.shift();i._testAsync(t).then((function(){n(t,e,r,u)}),(function(n){u(new c(i,t,n))}))}else r(t)}(n,t.chain.slice(),e,r)}))}}]),e}();function a(){return function n(t){return new Proxy(t,{get:function(e,r){if(r in e)return e[r];var u=n(t._clone());return r in l?u._applyModifier(l[r],r):r in s?u._applyRule(s[r],r):r in y?u._applyRule(y[r],r):void 0}})}(new f)}var s={};a.extend=function(n){Object.assign(s,n)},a.clearCustomRules=function(){s={}};var l={not:{simple:function(n){return function(t){return!n(t)}},async:function(n){return function(t){return Promise.resolve(n(t)).then((function(n){return!n})).catch((function(n){return!0}))}}},some:{simple:function(n){return function(t){return h(t).some((function(t){try{return n(t)}catch(n){return!1}}))}},async:function(n){return function(t){return Promise.all(h(t).map((function(t){try{return n(t).catch((function(n){return!1}))}catch(n){return!1}}))).then((function(n){return n.some(Boolean)}))}}},every:{simple:function(n){return function(t){return h(t).every(n)}},async:function(n){return function(t){return Promise.all(h(t).map(n)).then((function(n){return n.every(Boolean)}))}}}};function h(n){return"string"==typeof n?n.split(""):n}var y={equal:function(n){return function(t){return t==n}},exact:function(n){return function(t){return t===n}},number:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return"number"==typeof t&&(n||isFinite(t))}},integer:function(){return function(n){return(Number.isInteger||g)(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return p("string")},boolean:function(){return p("boolean")},undefined:function(){return p("undefined")},null:function(){return p("null")},array:function(){return p("array")},object:function(){return p("object")},instanceOf:function(n){return function(t){return t instanceof n}},pattern:function(n){return function(t){return n.test(t)}},lowercase:function(){return function(n){return/^([a-z]+\s*)+$/.test(n)}},uppercase:function(){return function(n){return/^([A-Z]+\s*)+$/.test(n)}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(t){return t[0]==n}},last:function(n){return function(t){return t[t.length-1]==n}},empty:function(){return function(n){return 0===n.length}},length:function(n,t){return function(e){return e.length>=n&&e.length<=(t||n)}},minLength:function(n){return function(t){return t.length>=n}},maxLength:function(n){return function(t){return t.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,t){return function(e){return e>=n&&e<=t}},range:function(n,t){return function(e){return e>=n&&e<=t}},lessThan:function(n){return function(t){return t<n}},lessThanOrEqual:function(n){return function(t){return t<=n}},greaterThan:function(n){return function(t){return t>n}},greaterThanOrEqual:function(n){return function(t){return t>=n}},even:function(){return function(n){return n%2==0}},odd:function(){return function(n){return n%2!=0}},includes:function(n){return function(t){return~t.indexOf(n)}},schema:function(n){return function(n){return{simple:function(t){var e=[];if(Object.keys(n).forEach((function(r){var u=n[r];try{u.check((t||{})[r])}catch(n){n.target=r,e.push(n)}})),e.length>0)throw e;return!0},async:function(t){var e=[],r=Object.keys(n).map((function(r){return n[r].testAsync((t||{})[r]).catch((function(n){n.target=r,e.push(n)}))}));return Promise.all(r).then((function(n){if(e.length>0)throw e;return!0}))}}}(n)},passesAnyOf:function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(n){return t.some((function(t){return t.test(n)}))}},optional:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return t&&"string"==typeof e&&""===e.trim()||null!=e&&n.check(e),!0}}};function p(n){return function(t){return Array.isArray(t)&&"array"===n||null===t&&"null"===n||typeof t===n}}function g(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}var v="undefined"==typeof global?"undefined"==typeof self?{}:self:global,d=String.fromCharCode,m={}.toString,b=v.SharedArrayBuffer,w=b?m.call(b):"",A=v.Uint8Array,_=A?m.call(ArrayBuffer.prototype):"",x=v.Buffer;try{!x&&v.require&&(x=v.require("Buffer"));var k=x.prototype,E=m.call(k)}catch(n){}var O=!!A&&!x,C=!x||!!A&&A.prototype.isPrototypeOf(k);function F(n){var t=n.charCodeAt(0),e=1114112,r=0,u=0|n.length,i="";switch(t>>>4){case 12:case 13:r=128>(e=(31&t)<<6|63&n.charCodeAt(1))?0:2;break;case 14:r=2048>(e=(15&t)<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2))?0:3;break;case 15:30==t>>>3&&(r=65536>(e=(7&t)<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|n.charCodeAt(3))?0:4)}for(r&&(u<r?r=0:65536>e?i=d(e):1114112>e?i=d(55296+((e=e-65664|0)>>>10)|0,56320+(1023&e)|0):r=0);r<u;r=r+1|0)i+="ï¿½";return i}function B(n){var t=0|n.charCodeAt(0);if(55296<=t&&56319>=t)if(56320<=(n=0|n.charCodeAt(1))&&57343>=n){if(65535<(t=(t<<10)+n-56613888|0))return d(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533;return 2047>=t?d(192|t>>>6,128|63&t):d(224|t>>>12,128|t>>>6&63,128|63&t)}function P(){}function T(n){for(var t=0|(n=void 0===n?"":(""+n).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,B)).length,e=O?new A(t):x.allocUnsafe?x.allocUnsafe(t):new x(t),r=0;r<t;r=r+1|0)e[r]=0|n.charCodeAt(r);return e}function R(n,t){var e=n[t];return function(){return e.apply(n,arguments)}}P.prototype.encode=T;var j=v.TextDecoder,M=v.TextEncoder,L=M||P;j&&R(new j,"decode"),M&&R(new M,"encode");a.extend({exactByteLength:function(n){return function(t){return(new L).encode(t).length===n}},base32CharsOnly:function(){return function(n){return new RegExp(/^[A-Z2-7]*$/).test(n)}}});var N={algoAddress:function(n){return a().string().exactByteLength(58).length(58).base32CharsOnly().test(n)}};return a.extend({maxByteLength:function(n){return function(t){return(new L).encode(t).length<=n}}}),{core:N,assets:{assetTotalIssuance:function(n){return a().integer().between(1,Number.MAX_SAFE_INTEGER).test(n)},assetDecimalPlaces:function(n){return a().integer().between(0,19).test(n)},defaultFrozen:function(n){return a().boolean().test(n)},assetIndex:function(n){return a().number().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER).test(n)},assetName:function(n){return a().string().maxByteLength(32).test(n)},unitName:function(n){return a().string().maxByteLength(8).test(n)},assetUrl:function(n){return a().string().maxByteLength(32).test(n)},assetMetadataHash:function(n){return a().string().maxByteLength(32).test(n)}}}}();
