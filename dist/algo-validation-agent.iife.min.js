var AlgoValidationAgent=function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?t(Object(s),!0).forEach((function(t){e(n,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(s,e))}))}return n}var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},u=function(){function e(t,n,s,o){r(this,e),this.name=t,this.fn=n,this.args=s,this.modifiers=o}return s(e,[{key:"_test",value:function(e){var t=this.fn;try{a(this.modifiers.slice(),t)(e)}catch(e){t=function(){return!1}}try{return a(this.modifiers.slice(),t)(e)}catch(e){return!1}}},{key:"_check",value:function(e){try{a(this.modifiers.slice(),this.fn)(e)}catch(e){if(a(this.modifiers.slice(),(function(e){return e}))(!1))return}if(!a(this.modifiers.slice(),this.fn)(e))throw null}},{key:"_testAsync",value:function(e){var t=this;return new Promise((function(n,r){(function e(t,n){if(t.length){var r=t.shift(),s=e(t,n);return r.performAsync(s)}return function(e){return Promise.resolve(i(n,"async")(e))}})(t.modifiers.slice(),t.fn)(e).then((function(t){t?n(e):r(null)})).catch((function(e){return r(e)}))}))}}]),e}();function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple";return"object"==typeof e?e[t]:e}function a(e,t){if(e.length){var n=e.shift(),r=a(e,t);return n.perform(r)}return i(t)}var c=function e(t,n,s){r(this,e),this.name=t,this.perform=n,this.performAsync=s},f=function(e){function t(e,n,s,u){r(this,t);for(var i=arguments.length,a=Array(i>4?i-4:0),c=4;c<i;c++)a[c-4]=arguments[c];var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return Error.captureStackTrace&&Error.captureStackTrace(f,t),f.rule=e,f.value=n,f.cause=s,f.target=u,f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r(this,e),this.chain=t,this.nextRuleModifiers=n}return s(e,[{key:"_applyRule",value:function(e,t){var n=this;return function(){for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return n.chain.push(new u(t,e.apply(n,s),s,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}}},{key:"_applyModifier",value:function(e,t){return this.nextRuleModifiers.push(new c(t,e.simple,e.async)),this}},{key:"_clone",value:function(){return new e(this.chain.slice(),this.nextRuleModifiers.slice())}},{key:"test",value:function(e){return this.chain.every((function(t){return t._test(e)}))}},{key:"testAll",value:function(e){var t=[];return this.chain.forEach((function(n){try{n._check(e)}catch(r){t.push(new f(n,e,r))}})),t}},{key:"check",value:function(e){this.chain.forEach((function(t){try{t._check(e)}catch(n){throw new f(t,e,n)}}))}},{key:"testAsync",value:function(e){var t=this;return new Promise((function(n,r){!function e(t,n,r,s){if(n.length){var o=n.shift();o._testAsync(t).then((function(){e(t,n,r,s)}),(function(e){s(new f(o,t,e))}))}else r(t)}(e,t.chain.slice(),n,r)}))}}]),e}();function h(){return function e(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var s=e(t._clone());return r in g?s._applyModifier(g[r],r):r in d?s._applyRule(d[r],r):r in p?s._applyRule(p[r],r):void 0}})}(new l)}var d={};h.extend=function(e){Object.assign(d,e)},h.clearCustomRules=function(){d={}};var g={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(e){return!0}))}}},some:{simple:function(e){return function(t){return y(t).some((function(t){try{return e(t)}catch(e){return!1}}))}},async:function(e){return function(t){return Promise.all(y(t).map((function(t){try{return e(t).catch((function(e){return!1}))}catch(e){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return y(t).every(e)}},async:function(e){return function(t){return Promise.all(y(t).map(e)).then((function(e){return e.every(Boolean)}))}}}};function y(e){return"string"==typeof e?e.split(""):e}var p={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return"number"==typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||v)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return m("string")},boolean:function(){return m("boolean")},undefined:function(){return m("undefined")},null:function(){return m("null")},array:function(){return m("array")},object:function(){return m("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return/^([a-z]+\s*)+$/.test(e)}},uppercase:function(){return function(e){return/^([A-Z]+\s*)+$/.test(e)}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2==0}},odd:function(){return function(e){return e%2!=0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach((function(r){var s=e[r];try{s.check((t||{})[r])}catch(e){e.target=r,n.push(e)}})),n.length>0)throw n;return!0},async:function(t){var n=[],r=Object.keys(e).map((function(r){return e[r].testAsync((t||{})[r]).catch((function(e){e.target=r,n.push(e)}))}));return Promise.all(r).then((function(e){if(n.length>0)throw n;return!0}))}}}(e)},passesAnyOf:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.some((function(t){return t.test(e)}))}},optional:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return t&&"string"==typeof n&&""===n.trim()||null!=n&&e.check(n),!0}}};function m(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function v(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var A="undefined"==typeof global?"undefined"==typeof self?{}:self:global,b=String.fromCharCode,x={}.toString,O=A.SharedArrayBuffer,w=O?x.call(O):"",T=A.Uint8Array,R=T?x.call(ArrayBuffer.prototype):"",E=A.Buffer;try{!E&&A.require&&(E=A.require("Buffer"));var _=E.prototype,F=x.call(_)}catch(e){}var k=!!T&&!E,I=!E||!!T&&T.prototype.isPrototypeOf(_);function D(e){var t=e.charCodeAt(0),n=1114112,r=0,s=0|e.length,o="";switch(t>>>4){case 12:case 13:r=128>(n=(31&t)<<6|63&e.charCodeAt(1))?0:2;break;case 14:r=2048>(n=(15&t)<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2))?0:3;break;case 15:30==t>>>3&&(r=65536>(n=(7&t)<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|e.charCodeAt(3))?0:4)}for(r&&(s<r?r=0:65536>n?o=b(n):1114112>n?o=b(55296+((n=n-65664|0)>>>10)|0,56320+(1023&n)|0):r=0);r<s;r=r+1|0)o+="ï¿½";return o}function N(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t)if(56320<=(e=0|e.charCodeAt(1))&&57343>=e){if(65535<(t=(t<<10)+e-56613888|0))return b(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533;return 2047>=t?b(192|t>>>6,128|63&t):b(224|t>>>12,128|t>>>6&63,128|63&t)}function j(){}function C(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,N)).length,n=k?new T(t):E.allocUnsafe?E.allocUnsafe(t):new E(t),r=0;r<t;r=r+1|0)n[r]=0|e.charCodeAt(r);return n}function P(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}j.prototype.encode=C;var M=A.TextDecoder,L=A.TextEncoder,q=L||j,S=(M&&P(new M,"decode"),L&&P(new L,"encode"),"pay"),U="keyreg",B="acfg",z="axfer",K="afrz";h.extend({exactByteLength:function(e){return function(t){return(new q).encode(t).length===e}},base32CharsOnly:function(){return function(e){return new RegExp(/^[A-Z2-7]*$/).test(e)}}});var H=h().string().exactByteLength(58).length(58).base32CharsOnly(),G={algoAddress:H,algoTxn:h().string().exactByteLength(52).length(52).base32CharsOnly()};h.extend({maxByteLength:function(e){return function(t){return(new q).encode(t).length<=e}}});var X=h().integer().between(0,19),$=h().integer().between(1,Number.MAX_SAFE_INTEGER),V=h().boolean(),Z=h().string(),J=h().string().maxByteLength(32),Q=h().string().maxByteLength(8),W=h().string().maxByteLength(32),Y={assetIndex:h().number().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER),assetDecimals:X,assetTotal:$,assetDefaultFrozen:V,assetMetadataHash:Z,assetName:J,assetUnitName:Q,assetURL:W,freezeState:h().boolean()};h.extend({isUint8Array:function(){return function(e){return e.constructor===Uint8Array}}});var ee=n({},G,{},Y,{},{genesisID:h().string(),lease:h().isUint8Array(),fee:h().integer().positive().greaterThanOrEqual(1e3).lessThanOrEqual(Number.MAX_SAFE_INTEGER),note:h().string().maxByteLength(1e3),group:h().string(),reKeyTo:H,firstRound:h().integer().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER),lastRound:h().integer().positive().greaterThan(0).lessThanOrEqual(Number.MAX_SAFE_INTEGER),genesisHash:h().string(),amount:h().integer().lessThanOrEqual(Number.MAX_SAFE_INTEGER).greaterThanOrEqual(0),closeRemainderTo:H,voteFirst:h().integer().greaterThan(0),voteKeyDilution:h().integer().greaterThan(0),voteLast:h().integer().greaterThan(0),voteKey:h().string(),selectionKey:h().string(),type:h().string().passesAnyOf(h().equal("pay"),h().equal("keyreg"),h().equal("acfg"),h().equal("axfer"),h().equal("afrz"))});var te={isAlgorandAddress:function(e){return ee.algoAddress.test(e)},isTransactionId:function(e){return ee.algoTxn.test(e)}};var ne={assetIndex:function(e){return ee.assetIndex.test(e)},assetTotal:function(e){return ee.assetTotal.test(e)},assetDecimals:function(e){return ee.assetDecimals.test(e)},assetDefaultFrozen:function(e){return ee.assetDefaultFrozen.test(e)},assetName:function(e){return ee.assetName.test(e)},assetUnitName:function(e){return ee.assetUnitName.test(e)},assetURL:function(e){return ee.assetURL.test(e)},assetMetadataHash:function(e){return ee.assetMetadataHash.test(e)}};var re={from:function(e){return ee.algoAddress.test(e)},fee:function(e){return ee.fee.test(e)},firstRound:function(e){return ee.firstRound.test(e)},lastRound:function(e){return ee.lastRound.test(e)},note:function(e){return ee.note.test(e)},genesisID:function(e){return ee.genesisID.test(e)},genesisHash:function(e){return ee.genesisHash.test(e)},group:function(e){return ee.group.test(e)},type:function(e){return ee.type.test(e)},to:function(e){return ee.algoAddress.test(e)},amount:function(e){return ee.amount.test(e)},closeRemainderTo:function(e){return ee.closeRemainderTo.test(e)}},se={genesisID:h().optional(ee.genesisID),fee:h().optional(ee.fee),note:h().optional(ee.note),lease:h().optional(ee.lease),group:h().optional(ee.group),reKeyTo:h().optional(ee.algoAddress)},oe={firstRound:ee.firstRound,lastRound:ee.lastRound,genesisHash:ee.genesisHash};function ue(e){return e.lastRound>e.firstRound}return{core:te,assetFieldValidators:ne,transactionFieldValidators:re,transactions:{payment:function(e){return h().schema(n({to:h().optional(ee.algoAddress),amount:h().optional(ee.amount),from:ee.algoAddress,type:h().string().exact(S)},oe,{},se)).test(e)&&ue(e)},close:function(e){var t=h().schema(n({closeRemainderTo:ee.algoAddress,from:ee.algoAddress,to:ee.algoAddress,type:h().string().exact(S)},oe,{},se)),r=e.closeRemainderTo!==e.from;return t.test(e)&&ue(e)&&r},registerKeyOnline:function(e){var t=h().schema(n({selectionKey:ee.selectionKey,from:ee.algoAddress,voteFirst:ee.voteFirst,voteKeyDilution:ee.voteKeyDilution,voteKey:ee.voteKey,voteLast:ee.voteLast,type:h().string().exact(U)},oe,{},se));return e.voteFirst,e.voteLast,t.test(e)&&ue(e)},registerKeyOffline:function(e){return h().schema(n({from:ee.algoAddress,type:h().string().exact(U)},oe,{},se)).test(e)&&ue(e)},assetCreate:function(e){return h().schema(n({assetMetadataHash:h().string(),assetName:ee.assetName,assetURL:ee.assetURL,assetClawback:ee.algoAddress,assetDecimals:ee.assetDecimals,assetFreeze:ee.algoAddress,assetManager:ee.algoAddress,assetReserve:ee.algoAddress,assetTotal:ee.assetTotal,assetUnitName:ee.assetUnitName,from:ee.algoAddress,type:h().string().exact(B)},oe,{},se)).test(e)&&ue(e)},assetConfigure:function(e){return h().schema(n({assetClawback:ee.algoAddress,assetFreeze:ee.algoAddress,assetManager:ee.algoAddress,assetReserve:ee.algoAddress,assetIndex:ee.assetIndex,from:ee.algoAddress,type:h().string().exact(B)},oe,{},se)).test(e)&&ue(e)},assetDestroy:function(e){return h().schema(n({assetIndex:ee.assetIndex,from:ee.algoAddress,type:h().string().exact(B)},oe,{},se)).test(e)&&ue(e)},assetOptIn:function(e){return h().schema(n({to:ee.algoAddress,from:ee.algoAddress,type:h().string().exact(z),assetIndex:ee.assetIndex},oe,{},se)).test(e)&&ue(e)},assetTransfer:function(e){return h().schema(n({amount:ee.amount,to:ee.algoAddress,from:ee.algoAddress,assetIndex:ee.assetIndex,type:h().string().exact(z)},oe,{},se)).test(e)&&ue(e)},assetRevoke:function(e){return h().schema(n({amount:ee.amount,to:ee.algoAddress,assetRevocationTarget:ee.algoAddress,from:ee.algoAddress,assetIndex:ee.assetIndex,type:h().string().exact(z)},oe,{},se)).test(e)&&ue(e)},assetFreeze:function(e){return h().schema(n({freezeState:ee.freezeState,freezeAccount:ee.algoAddress,assetIndex:ee.assetIndex,from:ee.algoAddress,type:h().string().exact(K)},oe,{},se)).test(e)&&ue(e)}}}}();
