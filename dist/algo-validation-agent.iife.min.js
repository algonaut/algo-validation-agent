var AlgoValidationAgent=function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),e=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},r=function(){function e(t,r,i,u){n(this,e),this.name=t,this.fn=r,this.args=i,this.modifiers=u}return t(e,[{key:"_test",value:function(n){var t=this.fn;try{u(this.modifiers.slice(),t)(n)}catch(n){t=function(){return!1}}try{return u(this.modifiers.slice(),t)(n)}catch(n){return!1}}},{key:"_check",value:function(n){try{u(this.modifiers.slice(),this.fn)(n)}catch(n){if(u(this.modifiers.slice(),(function(n){return n}))(!1))return}if(!u(this.modifiers.slice(),this.fn)(n))throw null}},{key:"_testAsync",value:function(n){var t=this;return new Promise((function(e,r){(function n(t,e){if(t.length){var r=t.shift(),u=n(t,e);return r.performAsync(u)}return function(n){return Promise.resolve(i(e,"async")(n))}})(t.modifiers.slice(),t.fn)(n).then((function(t){t?e(n):r(null)})).catch((function(n){return r(n)}))}))}}]),e}();function i(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple";return"object"==typeof n?n[t]:n}function u(n,t){if(n.length){var e=n.shift(),r=u(n,t);return e.perform(r)}return i(t)}var o=function t(e,r,i){n(this,t),this.name=e,this.perform=r,this.performAsync=i},c=function(t){function r(t,i,u,o){n(this,r);for(var c=arguments.length,s=Array(c>4?c-4:0),a=4;a<c;a++)s[a-4]=arguments[a];var f=e(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,s));return Error.captureStackTrace&&Error.captureStackTrace(f,r),f.rule=t,f.value=i,f.cause=u,f.target=o,f}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(r,Error),r}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n(this,e),this.chain=t,this.nextRuleModifiers=r}return t(e,[{key:"_applyRule",value:function(n,t){var e=this;return function(){for(var i=arguments.length,u=Array(i),o=0;o<i;o++)u[o]=arguments[o];return e.chain.push(new r(t,n.apply(e,u),u,e.nextRuleModifiers)),e.nextRuleModifiers=[],e}}},{key:"_applyModifier",value:function(n,t){return this.nextRuleModifiers.push(new o(t,n.simple,n.async)),this}},{key:"_clone",value:function(){return new e(this.chain.slice(),this.nextRuleModifiers.slice())}},{key:"test",value:function(n){return this.chain.every((function(t){return t._test(n)}))}},{key:"testAll",value:function(n){var t=[];return this.chain.forEach((function(e){try{e._check(n)}catch(r){t.push(new c(e,n,r))}})),t}},{key:"check",value:function(n){this.chain.forEach((function(t){try{t._check(n)}catch(e){throw new c(t,n,e)}}))}},{key:"testAsync",value:function(n){var t=this;return new Promise((function(e,r){!function n(t,e,r,i){if(e.length){var u=e.shift();u._testAsync(t).then((function(){n(t,e,r,i)}),(function(n){i(new c(u,t,n))}))}else r(t)}(n,t.chain.slice(),e,r)}))}}]),e}();function a(){return function n(t){return new Proxy(t,{get:function(e,r){if(r in e)return e[r];var i=n(t._clone());return r in l?i._applyModifier(l[r],r):r in f?i._applyRule(f[r],r):r in h?i._applyRule(h[r],r):void 0}})}(new s)}var f={};a.extend=function(n){Object.assign(f,n)},a.clearCustomRules=function(){f={}};var l={not:{simple:function(n){return function(t){return!n(t)}},async:function(n){return function(t){return Promise.resolve(n(t)).then((function(n){return!n})).catch((function(n){return!0}))}}},some:{simple:function(n){return function(t){return g(t).some((function(t){try{return n(t)}catch(n){return!1}}))}},async:function(n){return function(t){return Promise.all(g(t).map((function(t){try{return n(t).catch((function(n){return!1}))}catch(n){return!1}}))).then((function(n){return n.some(Boolean)}))}}},every:{simple:function(n){return function(t){return g(t).every(n)}},async:function(n){return function(t){return Promise.all(g(t).map(n)).then((function(n){return n.every(Boolean)}))}}}};function g(n){return"string"==typeof n?n.split(""):n}var h={equal:function(n){return function(t){return t==n}},exact:function(n){return function(t){return t===n}},number:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return"number"==typeof t&&(n||isFinite(t))}},integer:function(){return function(n){return(Number.isInteger||p)(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return y("string")},boolean:function(){return y("boolean")},undefined:function(){return y("undefined")},null:function(){return y("null")},array:function(){return y("array")},object:function(){return y("object")},instanceOf:function(n){return function(t){return t instanceof n}},pattern:function(n){return function(t){return n.test(t)}},lowercase:function(){return function(n){return/^([a-z]+\s*)+$/.test(n)}},uppercase:function(){return function(n){return/^([A-Z]+\s*)+$/.test(n)}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(t){return t[0]==n}},last:function(n){return function(t){return t[t.length-1]==n}},empty:function(){return function(n){return 0===n.length}},length:function(n,t){return function(e){return e.length>=n&&e.length<=(t||n)}},minLength:function(n){return function(t){return t.length>=n}},maxLength:function(n){return function(t){return t.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,t){return function(e){return e>=n&&e<=t}},range:function(n,t){return function(e){return e>=n&&e<=t}},lessThan:function(n){return function(t){return t<n}},lessThanOrEqual:function(n){return function(t){return t<=n}},greaterThan:function(n){return function(t){return t>n}},greaterThanOrEqual:function(n){return function(t){return t>=n}},even:function(){return function(n){return n%2==0}},odd:function(){return function(n){return n%2!=0}},includes:function(n){return function(t){return~t.indexOf(n)}},schema:function(n){return function(n){return{simple:function(t){var e=[];if(Object.keys(n).forEach((function(r){var i=n[r];try{i.check((t||{})[r])}catch(n){n.target=r,e.push(n)}})),e.length>0)throw e;return!0},async:function(t){var e=[],r=Object.keys(n).map((function(r){return n[r].testAsync((t||{})[r]).catch((function(n){n.target=r,e.push(n)}))}));return Promise.all(r).then((function(n){if(e.length>0)throw e;return!0}))}}}(n)},passesAnyOf:function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(n){return t.some((function(t){return t.test(n)}))}},optional:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return t&&"string"==typeof e&&""===e.trim()||null!=e&&n.check(e),!0}}};function y(n){return function(t){return Array.isArray(t)&&"array"===n||null===t&&"null"===n||typeof t===n}}function p(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}var v="undefined"==typeof global?"undefined"==typeof self?{}:self:global,d=String.fromCharCode,m={}.toString,x=v.SharedArrayBuffer,b=x?m.call(x):"",A=v.Uint8Array,E=A?m.call(ArrayBuffer.prototype):"",w=v.Buffer;try{!w&&v.require&&(w=v.require("Buffer"));var _=w.prototype,O=m.call(_)}catch(n){}var T=!!A&&!w,k=/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,F=new Uint16Array(32),R=!w||!!A&&A.prototype.isPrototypeOf(_);function B(n){var t=0|n.charCodeAt(0);if(55296<=t&&56319>=t)if(56320<=(n=0|n.charCodeAt(1))&&57343>=n){if(65535<(t=(t<<10)+n-56613888|0))return d(240|t>>18,128|t>>12&63,128|t>>6&63,128|63&t)}else t=65533;return 2047>=t?d(192|t>>6,128|63&t):d(224|t>>12,128|t>>6&63,128|63&t)}function N(){}function P(n){for(var t=0|(n=void 0===n?"":(""+n).replace(k,B)).length,e=T?new A(t):w.allocUnsafe?w.allocUnsafe(t):new w(t),r=0;r<t;r=r+1|0)e[r]=0|n.charCodeAt(r);return e}function C(n,t){var e=n[t];return function(){return e.apply(n,arguments)}}N.prototype.encode=P;var M=v.TextDecoder,j=v.TextEncoder,I=j||N,L=(M&&C(new M,"decode"),j&&C(new j,"encode"),function(n){return function(t){return(new I).encode(t).length===n}}),S=function(n){return function(t){return(new I).encode(t).length<=n}},q="pay",D="keyreg",G="acfg",z="axfer",X="afrz";a.extend({exactByteLength:L,base32CharsOnly:function(){return function(n){return new RegExp(/^[A-Z2-7]*$/).test(n)}}});var U=a().string().exactByteLength(58).length(58).base32CharsOnly(),$=a().string().exactByteLength(52).length(52).base32CharsOnly(),V=a().number().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER),H=a().schema({am:a().string(),an:a().string(),au:a().string(),c:U,dc:a().integer(),f:U,m:U,r:U,t:a().integer(),un:a().string()}),K=a().schema({c:U,f:U,m:U,r:U});function Z(n){return a().schema({txn:a().object()}).test(n)}var J={assetIndex:V,algoAddress:U,algoTxn:$,assetCreateParams:H,assetConfigureParams:K,isAlgorandAddress:function(n){return U.test(n)},isTransactionId:function(n){return $.test(n)},isAssetIndex:function(n){return V.test(n)},isTransactionPayload:Z};a.extend({maxByteLength:S});var Q={assetTotalIssuance:function(n){return a().integer().between(1,Number.MAX_SAFE_INTEGER).test(n)},assetDecimalPlaces:function(n){return a().integer().between(0,19).test(n)},defaultFrozen:function(n){return a().boolean().test(n)},assetName:function(n){return a().string().maxByteLength(32).test(n)},unitName:function(n){return a().string().maxByteLength(8).test(n)},assetUrl:function(n){return a().string().maxByteLength(32).test(n)},assetMetadataHash:function(n){return a().string().maxByteLength(32).test(n)}};return a.extend({exactByteLength:L,maxByteLength:S}),{core:J,assets:Q,transactionFields:{transactionSender:function(n){return U.test(n)},transactionFee:function(n){return a().number().positive().greaterThanOrEqual(1e3).lessThanOrEqual(Number.MAX_SAFE_INTEGER).test(n)},firstValidRound:function(n){return a().number().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER).test(n)},lastValidRound:function(n){return a().number().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER).test(n)},transactionNote:function(n){return a().string().maxByteLength(1e3).test(n)},transactionGenesisId:function(n){return a().string().test(n)},transactionGenesisHash:function(n){return a().string().test(n)},transactionGroup:function(n){return a().string().test(n)},transactionType:function(n){return a().string().test(n)},transactionReceiver:function(n){return U.test(n)},transactionAmount:function(n){return a().number().positive().lessThanOrEqual(Number.MAX_SAFE_INTEGER).test(n)},closeRemainderTo:function(n){return U.test(n)}},transactions:{payment:function(n){return!!Z(n)&&a().schema({amt:a().integer(),fee:a().integer(),fv:a().integer(),gen:a().string(),gh:a().string(),lv:a().integer(),note:a().string(),rcv:U,snd:U,type:a().string().exact(q)}).test(n.txn)},close:function(n){return!!Z(n)&&a().schema({close:U,fee:a().integer(),fv:a().integer(),gen:a().string(),gh:a().string(),lv:a().integer(),rcv:U,snd:U,type:a().string().exact(q)}).test(n.txn)},registerKeyOnline:function(n){return!!Z(n)&&a().schema({fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),selkey:a().string(),snd:U,votefst:a().integer(),votekd:a().integer(),votekey:a().string(),votelst:a().integer(),type:a().string().exact(D)}).test(n.txn)},registerKeyOffline:function(n){return!!Z(n)&&a().schema({fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(D)}).test(n.txn)},assetCreate:function(n){return!!Z(n)&&a().schema({apar:H,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(G)}).test(n.txn)},assetConfigure:function(n){return!!Z(n)&&a().schema({apar:K,caid:V,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(G)}).test(n.txn)},assetDestroy:function(n){return!!Z(n)&&a().schema({caid:V,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(G)}).test(n.txn)},assetOptIn:function(n){return!!Z(n)&&a().schema({arcv:U,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(z),xaid:V}).test(n.txn)},assetTransfer:function(n){return!!Z(n)&&a().schema({aamt:a().integer(),arcv:U,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(z),xaid:V}).test(n.txn)},assetRevoke:function(n){return!!Z(n)&&a().schema({aamt:a().integer(),arcv:U,asnd:U,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(z),xaid:V}).test(n.txn)},assetFreeze:function(n){return!!Z(n)&&a().schema({afrz:a().boolean(),fadd:U,faid:V,fee:a().integer(),fv:a().integer(),gh:a().string(),lv:a().integer(),snd:U,type:a().string().exact(X)}).test(n.txn)}}}}();
